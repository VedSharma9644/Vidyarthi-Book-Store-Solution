@model HomeDto
@{
    ViewData["Title"] = "Index";
}

<div class="text-center my-5" id="loading-spinner" style="display: none;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
<section id="slider-wrapper">

</section>

<section class="shopby">
    <div class="title">SHOP BY AGE</div>
    <div class="age-grid">
        <div class="age-item">
            <img src="images/shop/shop1.png" alt="0-5 Years">
            <p>0 - 5 Years</p>
        </div>
        <div class="age-item">
            <img src="images/shop/shop2.png" alt="5-7 Years">
            <p>5 - 7 Years</p>
        </div>
        <div class="age-item">
            <img src="images/shop/shop3.png" alt="7-9 Years">
            <p>7 - 9 Years</p>
        </div>
        <div class="age-item">
            <img src="images/shop/shop4.png" alt="9-11 Years">
            <p>9 - 11 Years</p>
        </div>
        <div class="age-item">
            <img src="images/shop/shop5.png" alt="11-16 Years">
            <p>11 - 16 Years</p>
        </div>
        <div class="age-item">
            <img src="images/shop/shop6.png" alt="18+ Years">
            <p>18+ Years</p>
        </div>
    </div>
</section>
<section id="product-wrapper">

</section>

<section id="customers-reviews" class="position-relative padding-large"
         style="background-image: url(images/banner-image-bg.jpg); background-size: cover; background-repeat: no-repeat; background-position: center; height: 600px;">
    <div class="container offset-md-3 col-md-6 ">
        <div class="position-absolute top-50 end-0 pe-0 pe-xxl-5 me-0 me-xxl-5 swiper-next testimonial-button-next">
            <svg class="chevron-forward-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                <use xlink:href="#alt-arrow-right-outline"></use>
            </svg>
        </div>
        <div class="position-absolute top-50 start-0 ps-0 ps-xxl-5 ms-0 ms-xxl-5 swiper-prev testimonial-button-prev">
            <svg class="chevron-back-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                <use xlink:href="#alt-arrow-left-outline"></use>
            </svg>
        </div>
        <div class="section-title mb-4 text-center">
            <h3 class="mb-4">Customers reviews</h3>
        </div>
        <div class="swiper testimonial-swiper ">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="card position-relative text-left p-5 border rounded-3">
                        <blockquote>
                            "I stumbled upon this bookstore while visiting the city, and it instantly became my favorite
                            spot. The cozy atmosphere, friendly staff, and wide selection of books make every visit a delight!"
                        </blockquote>
                        <div class="rating text-warning d-flex align-items-center">
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                        </div>
                        <h5 class="mt-1 fw-normal">Emma Chamberlin</h5>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card position-relative text-left p-5 border rounded-3">
                        <blockquote>
                            "As an avid reader, I'm always on the lookout for new releases, and this bookstore never
                            disappoints. They always have the latest titles, and their recommendations have introduced me to some
                            incredible reads!"
                        </blockquote>
                        <div class="rating text-warning d-flex align-items-center">
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                        </div>
                        <h5 class="mt-1 fw-normal">Thomas John</h5>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card position-relative text-left p-5 border rounded-3">
                        <blockquote>
                            "I ordered a few books online from this store, and I was impressed by the quick delivery and
                            careful packaging. It's clear that they prioritize customer satisfaction, and I'll definitely be
                            shopping here again!"
                        </blockquote>
                        <div class="rating text-warning d-flex align-items-center">
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                        </div>
                        <h5 class="mt-1 fw-normal">Kevin Bryan</h5>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card position-relative text-left p-5 border rounded-3">
                        <blockquote>
                            “I stumbled upon this tech store while searching for a new laptop, and I couldn't be happier
                            with my experience! The staff was incredibly knowledgeable and guided me through the process of choosing
                            the perfect device for my needs. Highly recommended!”
                        </blockquote>
                        <div class="rating text-warning d-flex align-items-center">
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                        </div>
                        <h5 class="mt-1 fw-normal">Stevin</h5>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="card position-relative text-left p-5 border rounded-3">
                        <blockquote>
                            “I stumbled upon this tech store while searching for a new laptop, and I couldn't be happier
                            with my experience! The staff was incredibly knowledgeable and guided me through the process of choosing
                            the perfect device for my needs. Highly recommended!”
                        </blockquote>
                        <div class="rating text-warning d-flex align-items-center">
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                            <svg class="star star-fill">
                                <use xlink:href="#star-fill"></use>
                            </svg>
                        </div>
                        <h5 class="mt-1 fw-normal">Roman</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
@section Scripts {
    <script>
        $(document).ready(function () {
            $('#loading-spinner').show(); // Show spinner before starting the request

            $.ajax({
                url: '/api/home-data',
                method: 'GET',
                success: function (response) {
                    const sliderContainer = $('#slider-wrapper');
                    sliderContainer.empty();

                    const sliderSlides = response.slider.map(slide => `
                        <div class="swiper-slide">
                            <div class="container">
                                <div class="row d-flex flex-column-reverse flex-md-row align-items-center">
                                    <div class="col-md-5 offset-md-1 mt-5 mt-md-0 text-center text-md-start">
                                        <div class="banner-content">
                                            <h2>${slide.title}</h2>
                                            <p>${slide.description}</p>
                                            <a href="${slide.redirectUrl}" class="btn mt-3"><i class="fa-solid fa-bus"></i> School Zone</a>
                                        </div>
                                    </div>
                                    <div class="col-md-6 text-center">
                                        <div class="image-holder">
                                            <img src="${slide.imageUrl}" class="img-fluid" alt="banner">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('');

                    sliderContainer.append(`
                        <section id="billboard" class="position-relative d-flex align-items-center py-5 bg-light-gray"
                                 style="background-image: url(images/banner-image-bg.jpg); background-size: cover; background-repeat: no-repeat; background-position: center; height: 800px;">
                            <div class="position-absolute end-0 pe-0 pe-xxl-5 me-0 me-xxl-5 swiper-next main-slider-button-next">
                                <svg class="chevron-forward-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                                    <use xlink:href="#alt-arrow-right-outline"></use>
                                </svg>
                            </div>
                            <div class="position-absolute start-0 ps-0 ps-xxl-5 ms-0 ms-xxl-5 swiper-prev main-slider-button-prev">
                                <svg class="chevron-back-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                                    <use xlink:href="#alt-arrow-left-outline"></use>
                                </svg>
                            </div>
                            <div class="swiper main-swiper">
                                <div class="swiper-wrapper">
                                    ${sliderSlides}
                                </div>
                            </div>
                        </section>
                    `);

                    const productContainer = $('#product-wrapper');
                    productContainer.empty();

                    const productSlides = response.books.map(book => `
                        <div class="swiper-slide">
                            <div class="card position-relative p-4 border rounded-3">
                             
                                <h6 class="mt-4 mb-0 fw-bold"><a href="#">${book.title}</a></h6>
                                <div class="review-content d-flex">
                                    <p class="my-2 me-2 fs-6 text-black-50">${book.author}</p>
                                    <div class="rating text-warning d-flex align-items-center">
                                        ${'<svg class="star star-fill"><use xlink:href="#star-fill"></use></svg>'.repeat(book.rating)}
                                    </div>
                                </div>
                                <span class="price text-primary fw-bold mb-2 fs-5">₹${book.price}</span>
                            </div>
                        </div>
                    `).join('');

                    productContainer.append(`
                        <section id="best-selling-items" class="position-relative padding-large">
                            <div class="container">
                                <div class="section-title d-md-flex justify-content-between align-items-center mb-4">
                                    <h3 class="d-flex align-items-center">Best selling items</h3>
                                    <a href="/shop.html" class="btn">View All</a>
                                </div>
                                <div class="position-absolute top-50 end-0 pe-0 pe-xxl-5 me-0 me-xxl-5 swiper-next product-slider-button-next">
                                    <svg class="chevron-forward-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                                        <use xlink:href="#alt-arrow-right-outline"></use>
                                    </svg>
                                </div>
                                <div class="position-absolute top-50 start-0 ps-0 ps-xxl-5 ms-0 ms-xxl-5 swiper-prev product-slider-button-prev">
                                    <svg class="chevron-back-circle d-flex justify-content-center align-items-center p-2" width="80" height="80">
                                        <use xlink:href="#alt-arrow-left-outline"></use>
                                    </svg>
                                </div>
                                <div class="swiper product-swiper">
                                    <div class="swiper-wrapper">
                                        ${productSlides}
                                    </div>
                                </div>
                            </div>
                        </section>
                    `);

                    if (typeof Swiper !== 'undefined') {
                        new Swiper('.main-swiper', {
                            navigation: {
                                nextEl: '.main-slider-button-next',
                                prevEl: '.main-slider-button-prev',
                            },
                            loop: true
                        });

                        new Swiper('.product-swiper', {
                            slidesPerView: 4,
                            spaceBetween: 20,
                            navigation: {
                                nextEl: '.product-slider-button-next',
                                prevEl: '.product-slider-button-prev',
                            },
                            breakpoints: {
                                320: { slidesPerView: 1 },
                                768: { slidesPerView: 2 },
                                1024: { slidesPerView: 3 },
                                1200: { slidesPerView: 4 }
                            },
                            loop: true
                        });
                    }

                    $('#loading-spinner').hide(); // Hide spinner after success
                },
                error: function () {
                    alert('Failed to load homepage data.');
                    $('#loading-spinner').hide(); // Hide spinner on error too
                }
            });
        });
    </script>
}





